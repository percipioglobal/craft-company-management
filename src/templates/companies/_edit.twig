{%- extends "_layouts/cp" -%}

{%- import "_includes/forms" as forms -%}
{%- import "company-management/companies/_fields" as companyFields -%}

{%- set selectedSubnavItem = "companies" -%}
{%- set company = company ?? null -%}
{%- set fullPageForm = true -%}

{%- set crumbs = [
    { label: "Companies"|t('company-managament'), url: url('company-management/companies') },
] -%}

{%- set tabs = {
    company: {label: 'Company'|t('company-management'), url: '#company'},
    contact: {label: 'Contact'|t('company-management'), url: '#contact'},
} -%}

{% block header %}
    <div class="flex flex-nowrap">
        {{ block('pageTitle') }}
    </div>
    <div class="flex">
        {{ block('actionButton') }}
    </div>
{% endblock %}

{% block actionButton %}
    <div class="buttons">
        <input type="submit" data-action="company-management/companies/save" class="btn submit" value="{{ 'Save'|t('company-management') }}">
    </div>
{% endblock %}

{% block content %}
    <input type="hidden" name="action" value="company-management/company/save">
    {{- redirectInput('company-management/companies') -}}


    {%- if company -%}<input type="hidden" name="companyId" value="{{ company.id }}">{%- endif -%}
    <input type="hidden" name="siteId" value="{{ company ? company.siteId : currentSite.id }}">

    <div id="company">
        {{- companyFields.company(company) -}}
    </div>
    <div id="contact">
        {{- companyFields.contact(company) -}}
    </div>

{% endblock %}
